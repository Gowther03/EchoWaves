<app-customer-header></app-customer-header>
<div class="animated-background">
  <div class="container py-5">
    <div class="card-header-custom">
      <h2 class="text-center m-0">Update Profile</h2>
    </div>
    <div class="card-body-custom">
      <form [formGroup]="updateProfileForm" (ngSubmit)="onUpdateProfile()" *ngIf="!isLoading && !isSuccess">
        <div class="row g-4">
          <div class="col-md-6 pe-md-4">
            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-person-badge"></i>
                </span>
                <input type="text" id="firstName" class="form-control-custom" formControlName="firstName"
                  placeholder="First Name" />
              </div>
              <div
                *ngIf="updateProfileForm.controls['firstName'].invalid && updateProfileForm.controls['firstName'].touched"
                class="error-message">
                First name is required and should be letters.
              </div>
            </div>

            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-person-badge-fill"></i>
                </span>
                <input type="text" id="lastName" class="form-control-custom" formControlName="lastName"
                  placeholder="Last Name" />
              </div>
              <div
                *ngIf="updateProfileForm.controls['lastName'].invalid && updateProfileForm.controls['lastName'].touched"
                class="error-message">
                Last name is required and should be letters.
              </div>
            </div>

            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-envelope"></i>
                </span>
                <input type="email" id="email" class="form-control-custom" formControlName="email"
                  placeholder="Email" />
              </div>
              <div *ngIf="updateProfileForm.controls['email'].invalid && updateProfileForm.controls['email'].touched"
                class="text-danger">
                A valid email is required.
              </div>
            </div>

            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-phone"></i>
                </span>
                <input type="text" id="contactNumber" class="form-control-custom" formControlName="contactNumber"
                  placeholder="Contact Number" />
              </div>
              <div
                *ngIf="updateProfileForm.controls['contactNumber'].invalid && updateProfileForm.controls['contactNumber'].touched"
                class="text-danger">
                A valid 10-digit contact number is required.
              </div>
            </div>
          </div>
          <div class="col-md-6 ps-md-4">
            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-building"></i>
                </span>
                <input type="text" id="city" class="form-control-custom" formControlName="city"/>
              </div>
              <div *ngIf="updateProfileForm.controls['city'].invalid && updateProfileForm.controls['city'].touched"
                class="text-danger">
                City is required and must contain only letters.
              </div>
            </div>

            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-geo-alt"></i>
                </span>
                <input type="text" id="state" class="form-control-custom" formControlName="state"/>
              </div>
              <div *ngIf="updateProfileForm.controls['state'].invalid && updateProfileForm.controls['state'].touched"
                class="text-danger">
                State is required and must contain only letters.
              </div>
            </div>

            <div class="form-group-custom">
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-pin-map"></i>
                </span>
                <input type="number" id="pinCode" class="form-control-custom" formControlName="pinCode"/>
              </div>
              <div
                *ngIf="updateProfileForm.controls['pinCode'].invalid && updateProfileForm.controls['pinCode'].touched"
                class="text-danger">
                A valid 6-digit pin code is required.
              </div>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="mt-4">
          <button type="submit" class="submit-button" [disabled]="updateProfileForm.invalid">
            <span>Update Profile</span>
            <i class="bi bi-arrow-right-circle-fill ms-2"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>


<div *ngIf="isLoading" class="overlay">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<!-- Error Message -->
<div *ngIf="errorMessage" class="alert alert-danger text-center">
  {{ errorMessage }}
</div>


<!-- Toast Container -->
<!-- Toast Container -->
<div class="neo-toast-container" *ngIf="showToastFlag && toastMessage">
  <div id="errorToast" class="neo-toast" role="alert">
      <div class="toast-content">
          <i class="bi bi-info-circle"></i>
          <span>{{ toastMessage }}</span>
          <button type="button" class="neo-close-btn" (click)="closeToast()">
              <i class="bi bi-x"></i>
          </button>
      </div>
  </div>
</div>
<!-- Add Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">