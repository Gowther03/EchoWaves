<div class="animated-background">
  <div class="container py-5">
    <div class="glass-card">
      <div class="card-header-custom">
        <h2 class="text-center m-0">Create Account</h2>
      </div>
      <div class="card-body-custom">
        <form [formGroup]="registerForm" (ngSubmit)="registerCustomer()" enctype="multipart/form-data">
          <div class="row g-4">
            <!-- Left Column -->
            <div class="col-md-6 pe-md-4">
              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-person"></i>
                  </span>
                  <input type="text" id="userName" class="form-control-custom" 
                    formControlName="userName" placeholder="Username" />
                </div>
                <div *ngIf="registerForm.controls['userName'].invalid && registerForm.controls['userName'].touched" 
                  class="error-message">
                  Username must be at least 3 characters long.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-person-badge"></i>
                  </span>
                  <input type="text" id="firstName" class="form-control-custom" 
                    formControlName="firstName" placeholder="First Name" />
                </div>
                <div *ngIf="registerForm.controls['firstName'].invalid && registerForm.controls['firstName'].touched" 
                  class="error-message">
                  First name is required and should be letters.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-person-badge-fill"></i>
                  </span>
                  <input type="text" id="lastName" class="form-control-custom" 
                    formControlName="lastName" placeholder="Last Name" />
                </div>
                <div *ngIf="registerForm.controls['lastName'].invalid && registerForm.controls['lastName'].touched" 
                  class="error-message">
                  Last name is required and should be letters.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-phone"></i>
                  </span>
                  <input type="text" id="contactNumber" class="form-control-custom" 
                    formControlName="contactNumber" placeholder="Contact Number" />
                </div>
                <div *ngIf="registerForm.controls['contactNumber'].invalid && registerForm.controls['contactNumber'].touched" class="text-danger">
                  A valid 10-digit contact number is required.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-envelope"></i>
                  </span>
                  <input type="email" id="email" class="form-control-custom" 
                    formControlName="email" placeholder="Email" />
                </div>
                <div *ngIf="registerForm.controls['email'].invalid && registerForm.controls['email'].touched" class="text-danger">
                  A valid email is required.
                </div>
              </div>
            </div>

            <!-- Right Column -->
            <div class="col-md-6 ps-md-4">
              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-lock"></i>
                  </span>
                  <input type="password" id="password" class="form-control-custom" 
                    formControlName="password" placeholder="Password" />
                </div>
                <div *ngIf="registerForm.controls['password'].invalid && registerForm.controls['password'].touched" class="text-danger">
                  Password must be at least 6 characters long.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-building"></i>
                  </span>
                  <input type="text" id="city" class="form-control-custom" 
                    formControlName="city" placeholder="City" />
                </div>
                <div *ngIf="registerForm.controls['city'].invalid && registerForm.controls['city'].touched" class="text-danger">
                  City is required and must contain only letters.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-geo-alt"></i>
                  </span>
                  <input type="text" id="state" class="form-control-custom" 
                    formControlName="state" placeholder="State" />
                </div>
                <div *ngIf="registerForm.controls['state'].invalid && registerForm.controls['state'].touched" class="text-danger">
                  State is required and must contain only letters.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="input-group">
                  <span class="input-icon">
                    <i class="bi bi-pin-map"></i>
                  </span>
                  <input type="number" id="pinCode" class="form-control-custom" 
                    formControlName="pinCode" placeholder="Pin Code" />
                </div>
                <div *ngIf="registerForm.controls['pinCode'].invalid && registerForm.controls['pinCode'].touched" class="text-danger">
                  A valid 6-digit pin code is required.
                </div>
              </div>

              <div class="form-group-custom">
                <div class="file-upload">
                  <label for="image" class="file-label">
                    <i class="bi bi-cloud-upload me-2"></i>
                    Upload Profile Picture
                  </label>
                  <input type="file" id="image" class="file-input" 
                    (change)="onFileSelected($event)" />

                  <!-- Preview Area -->
                  <div class="image-preview-container">
                    <div *ngFor="let preview of imagePreviews" class="image-preview">
                      <img [src]="preview" alt="Image Preview" />
                    </div>
                  </div>
                </div>  
                
              </div>
              
            </div>
          </div>

          <!-- Submit Button -->
          <div class="mt-4">
            <button type="submit" class="submit-button" [disabled]="registerForm.invalid">
              <span>Create Account</span>
              <i class="bi bi-arrow-right-circle-fill ms-2"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div *ngIf="isLoading" class="overlay">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
<div class="neo-toast-container" *ngIf="showToastFlag && toastMessage">
  <div id="errorToast" class="neo-toast" role="alert">
      <div class="toast-content">
          <i class="bi bi-info-circle"></i>
          <span>{{ toastMessage }}</span>
          <span role="button" class="neo-close-btn" (click)="closeToast()">
              <i class="bi bi-x"></i>
          </span>
      </div>
  </div>
</div>
<!-- Add Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">


