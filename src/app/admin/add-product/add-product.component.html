<div class="container-fluid d-flex justify-content-center align-items-center min-vh-100 p-3" style="background-color: #121212;">
  <div class="card p-4 shadow-lg text-white bg-dark" style="width: 100%; max-width: 600px; border-radius: 15px;">
    <h1 class="text-center mb-4 fw-bold text-white" style="font-family: 'Poppins', sans-serif;">Add Product</h1>
    <form [formGroup]="addProductForm" (ngSubmit)="onSubmit()">
      <!-- Product Name -->
      <div class="mb-3">
        <label for="name" class="form-label fw-bold" style="font-size: 1.1rem;">Product Name</label>
        <input type="text" id="name" class="form-control shadow-sm" placeholder="Enter Product Name" formControlName="productName" style="border-radius: 10px;">
        <div *ngIf="addProductForm.controls['productName'].invalid && addProductForm.controls['productName'].touched" class="text-danger small mt-1">
          Product Name is required and must not exceed 100 characters.
        </div>
      </div>

      <!-- Category -->
      <div class="mb-3">
        <label for="category" class="form-label fw-bold" style="font-size: 1.1rem;">Category</label>
        <select id="category" class="form-select shadow-sm" formControlName="categoryName" (change)="onCategoryChange($event)" style="border-radius: 10px;">
          <option value="" disabled>Select Category</option>
          <option value="Men">Men</option>
          <option value="Women">Women</option>
          <option value="Kids">Kids</option>
        </select>
        <div *ngIf="addProductForm.controls['categoryName'].invalid && addProductForm.controls['categoryName'].touched" class="text-danger small mt-1">
          Please select a valid category.
        </div>
      </div>

      <!-- Product Type -->
      <div class="mb-3">
        <label for="type" class="form-label fw-bold" style="font-size: 1.1rem;">Product Type</label>
        <select id="type" class="form-select shadow-sm" formControlName="productType" style="border-radius: 10px;">
          <option value="" disabled>Select Product Type</option>
          <option *ngFor="let type of availableProductTypes" [value]="type">{{ type }}</option>
        </select>
        <div *ngIf="addProductForm.controls['productType'].invalid && addProductForm.controls['productType'].touched" class="text-danger small mt-1">
          Please select a valid product type for the chosen category.
        </div>
      </div>

      <!-- Price -->
      <div class="mb-3">
        <label for="price" class="form-label fw-bold" style="font-size: 1.1rem;">Price</label>
        <input type="number" id="price" class="form-control shadow-sm" placeholder="Enter Price" formControlName="productPrice" style="border-radius: 10px;">
        <div *ngIf="addProductForm.controls['productPrice'].invalid && addProductForm.controls['productPrice'].touched" class="text-danger small mt-1">
          Price is required and must be greater than 0.
        </div>
      </div>

      <!-- Stock Quantity -->
      <div class="mb-3">
        <label for="stock" class="form-label fw-bold" style="font-size: 1.1rem;">Stock Quantity</label>
        <input type="number" id="stock" class="form-control shadow-sm" placeholder="Enter Stock Quantity" formControlName="stockQuantity" style="border-radius: 10px;">
        <div *ngIf="addProductForm.controls['stockQuantity'].invalid && addProductForm.controls['stockQuantity'].touched" class="text-danger small mt-1">
          Stock Quantity is required and must not exceed 500.
        </div>
      </div>

      <!-- Product Images -->
      <div class="mb-3">
        <label for="images" class="form-label fw-bold" style="font-size: 1.1rem;">Product Images</label>
        <input
          type="file"
          id="images"
          class="form-control shadow-sm"
          (change)="onFileSelect($event)"
          multiple
          style="border-radius: 10px;"
        />
        <div *ngIf="addProductForm.controls['images'].invalid && addProductForm.controls['images'].touched" class="text-danger small mt-1">
          Product Images are required.
        </div>
      </div>

      <!-- Product Description -->
      <div class="mb-3">
        <label for="description" class="form-label fw-bold" style="font-size: 1.1rem;">Description</label>
        <textarea id="description" class="form-control shadow-sm" placeholder="Enter Product Description" formControlName="productDescription" rows="3" style="border-radius: 10px;"></textarea>
        <div *ngIf="addProductForm.controls['productDescription'].invalid && addProductForm.controls['productDescription'].touched" class="text-danger small mt-1">
          Description is required and must not exceed 500 characters.
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn b w-100 shadow-sm mt-4" [disabled]="!addProductForm.valid" style="border-radius: 15px; font-size: 1.2rem;">Add Product</button>
    </form>
  </div>
</div>
<div *ngIf="isLoading" class="overlay">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div
  id="errorToast"
  class="toast position-fixed top-0 end-0 p-3"
  style="z-index: 1055;"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
>
  <div class="toast-header">
    <strong class="me-auto">Message</strong>
    <span
      class="custom-close"
      role="button"
      (click)="closeToast()"
      aria-label="Close"
    >
      <i class="fa fa-times"></i>
    </span>
  </div>
  <div class="toast-body">
    {{ toastMessage }}
  </div>
</div>
